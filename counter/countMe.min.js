$(document).ready(function () {
    $.fn.count = function (options) {
        var settings = $.extend({
            startAt: 0,
            endAt: 0,
            speed: 8000,
            refreshInterval: 100,
            onComplete: null
        }, options);

        return this.each(function () {
            var $this = $(this);
            var currentNumber = settings.startAt;
            var increment = (settings.endAt - settings.startAt) / (settings.speed / settings.refreshInterval);

            function updateNumber() {
                currentNumber += increment;
                if (currentNumber >= settings.endAt) {
                    currentNumber = settings.endAt;
                    clearInterval(interval);
                    if (settings.onComplete) {
                        settings.onComplete();
                    }
                }
                $this.text(Math.floor(currentNumber));
            }

            var interval = setInterval(updateNumber, settings.refreshInterval);
        });
    };

    $('.count').each(function () {
        var $this = $(this);
        $this.count({
            startAt: 0,
            endAt: parseInt($this.text()),
            speed: 8000,
            refreshInterval: 60,
            onComplete: function () {
                console.log("Completed count for element:", $this);
            }
        });
    });
});
